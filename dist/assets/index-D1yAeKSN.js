import{r as o,j as e,F as k,f as ee,a as se,u as $,b as te,c as ae,d as re,e as ne,g as oe,h as le,G as ie,M as ce,L as R,i as de,V as S,k as O,l as me,m as ue,n as xe,o as T,N as ge,p as he,q as pe,O as fe,R as be,s as M,t as je,v as ye,B as Ne}from"./vendor-fFx5SGW6.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function r(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(n){if(n.ep)return;n.ep=!0;const l=r(n);fetch(n.href,l)}})();const y={brideName:"Angel",brideDob:"1 Januari 1995",brideImage:"https://picsum.photos/seed/bride/400/400",groomName:"Matthew",groomDob:"14 Februari 1993",groomImage:"https://picsum.photos/seed/groom/400/400",date:"Sabtu, 26 Oktober 2024",heroImage:"https://picsum.photos/seed/wedding_hero/1920/1080",storyTitle:"Kisah Cinta Kami",story:"Dari pertemuan yang tak terduga hingga cinta seumur hidup, perjalanan kami dipenuhi dengan tawa, petualangan, dan dukungan yang tak tergoyahkan satu sama lain. Kami menemukan ikatan yang semakin dalam setiap harinya, dibangun atas mimpi bersama dan pemahaman yang mendalam. Kami sangat bersemangat untuk memulai babak baru sebagai suami istri, dan kami tidak sabar untuk merayakan hari istimewa kami bersama Anda, keluarga dan sahabat tercinta, yang telah melimpahkan cinta dan dukungan sepanjang perjalanan kami.",ceremony:{title:"Upacara Pernikahan",time:"2:00 PM",venue:"The Enchanted Garden",address:"123 Blossom Lane, Dreamville, CA",details:"Bergabunglah dengan kami saat kami mengucapkan janji suci dalam suasana taman yang indah, dikelilingi ketenangan alam.",latitude:34.052235,longitude:-118.243683},reception:{title:"Resepsi",time:"6:00 PM",venue:"Starlight Ballroom",address:"456 Celebration Avenue, Dreamville, CA",details:"Rayakan bersama kami! Malam yang penuh dengan makan malam, tarian, dan kenangan indah yang akan bertahan seumur hidup menanti Anda.",latitude:34.052235,longitude:-118.243683},rsvpByDate:"15 September 2024",galleryImages:[{src:"https://picsum.photos/seed/gallery1/800/600",alt:"Pasangan tersenyum"},{src:"https://picsum.photos/seed/gallery2/800/600",alt:"Detail tempat pernikahan"},{src:"https://picsum.photos/seed/gallery3/800/600",alt:"Foto pertunangan"},{src:"https://picsum.photos/seed/gallery4/800/600",alt:"Pasangan bergandengan tangan"},{src:"https://picsum.photos/seed/gallery5/800/600",alt:"Pemandangan indah"},{src:"https://picsum.photos/seed/gallery6/800/600",alt:"Detail close-up"}],footerMessage:"Dibuat dengan cinta untuk hari istimewa kami.",groomDetails:{fullName:"Mathew Agape Sitorus",parentInfo:"Putra dari Bapak Mangapul Sitorus & Ibu Yiendertivita Damanik",image:"https://picsum.photos/seed/groom-full/1920/1080",instagramHandle:"mathew_instagram"},brideDetails:{fullName:"Anjelia Septriani Siahaan",parentInfo:"Putri dari Bapak Israel Siahaan (Alm) & Ibu Mariana Nursita Hasibuansection",image:"https://picsum.photos/seed/bride-full/1920/1080",instagramHandle:"anjelia_instagram"}},B=o.createContext(void 0),we=({children:t})=>{const[s,r]=o.useState(!1),a=o.useRef(null);o.useEffect(()=>{a.current=new Audio("/music.mp3"),a.current.loop=!0;const c=new URLSearchParams(window.location.search).get("nomusic"),x=window.location.pathname.includes("/admin");return c===null&&!x&&a.current.play().then(()=>{r(!0)}).catch(i=>{console.log("Autoplay prevented:",i)}),()=>{a.current&&(a.current.pause(),a.current=null)}},[]);const n=()=>{a.current&&(s?a.current.pause():a.current.play(),r(!s))};return e.jsx(B.Provider,{value:{isPlaying:s,togglePlay:n},children:t})},ve=()=>{const t=o.useContext(B);if(t===void 0)throw new Error("useMusic must be used within a MusicProvider");return t},F=({className:t})=>{const{isPlaying:s,togglePlay:r}=ve();return e.jsx("div",{className:t,children:e.jsxs("button",{onClick:r,className:`${s?"playing":""} flex flex-col md:bg-rose-gold md:p-4 md:rounded-lg md:shadow-lg hover:shadow-xl transition-shadow duration-300`,children:[e.jsx(k,{icon:s?ee:se,className:"text-lg md:text-white"}),e.jsxs("span",{className:"text-xs md:hidden",children:[s?"Pause":"Play"," Music"]})]})})},ke=({brideName:t,groomName:s,isMobile:r})=>{const[a,n]=o.useState(!1),l=`${t.charAt(0)} & ${s.charAt(0)}`,c=$(),x=c.pathname.startsWith("/admin");o.useEffect(()=>{const b=()=>{n(window.scrollY>50)};if(x)n(!0),window.removeEventListener("scroll",b);else return n(window.scrollY>50),window.addEventListener("scroll",b),()=>window.removeEventListener("scroll",b)},[c.pathname,x]);const i=b=>w=>{w.preventDefault();const v=document.getElementById(b);v&&v.scrollIntoView({behavior:"smooth"})},h=x?!0:r?a:!0,u=x||a,d=`fixed z-50 transition-all duration-300
    ${r?"bottom-4 inset-x-4 rounded-xl":"top-0 left-0 right-0 w-full"}
    ${h?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}
    ${u?"bg-cream/80 shadow-lg backdrop-blur-sm py-3":"bg-transparent py-3"}
  `,m=u?"text-rose-gold":"text-white",f=u?"hover:text-deep-green":"hover:text-rose-gold",p=u?"text-charcoal-gray":"text-white",g="hover:text-rose-gold";return e.jsx("header",{className:d,children:e.jsxs("div",{className:`container mx-auto max-w-6xl flex justify-around md:justify-between items-center px-4 md:px-6
        ${u?"py-3":"py-0"}
      `,children:[e.jsx("a",{href:"#hero",onClick:i("hero"),className:`text-2xl font-serif font-bold ${m} ${f} transition-colors
            ${r?"hidden":"block"}
          `,children:l}),e.jsx("nav",{className:`${r&&!a&&!x?"hidden":""} md:block`,children:e.jsxs("ul",{className:"flex justify-between md:space-x-8 w-full",children:[e.jsx("li",{className:"px-2",children:e.jsxs("a",{href:"#hero",onClick:i("hero"),className:`flex flex-col items-center ${p} ${g} font-medium transition-colors`,children:[e.jsx(k,{icon:te,className:"text-lg md:hidden"}),e.jsx("span",{className:"text-xs md:text-base",children:"Beranda"})]})}),e.jsx("li",{className:"px-2",children:e.jsxs("a",{href:"#story",onClick:i("story"),className:`flex flex-col items-center ${p} ${g} font-medium transition-colors`,children:[e.jsx(k,{icon:ae,className:"text-lg md:hidden"}),e.jsx("span",{className:"text-xs md:text-base",children:"Cerita"})]})}),e.jsx("li",{className:"px-2",children:e.jsxs("a",{href:"#event",onClick:i("event"),className:`flex flex-col items-center ${p} ${g} font-medium transition-colors`,children:[e.jsx(k,{icon:re,className:"text-lg md:hidden"}),e.jsx("span",{className:"text-xs md:text-base",children:"Acara"})]})}),e.jsx("li",{className:"px-2",children:e.jsxs("a",{href:"#rsvp",onClick:i("rsvp"),className:`flex flex-col items-center ${p} ${g} font-medium transition-colors`,children:[e.jsx(k,{icon:ne,className:"text-lg md:hidden"}),e.jsx("span",{className:"text-xs md:text-base",children:"RSVP"})]})}),e.jsx("li",{className:"px-2",children:e.jsxs("a",{href:"#gallery",onClick:i("gallery"),className:`flex flex-col items-center ${p} ${g} font-medium transition-colors`,children:[e.jsx(k,{icon:oe,className:"text-lg md:hidden"}),e.jsx("span",{className:"text-xs md:text-base",children:"Galeri"})]})}),r&&e.jsx("li",{className:"px-2",children:e.jsx(F,{className:`flex flex-col items-center ${p} ${g} font-medium transition-colors`})})]})})]})})},Se=({brideName:t,groomName:s,date:r,heroImage:a,onImageLoad:n})=>{const[l,c]=o.useState(0),x=$(),[i,h]=o.useState(null);return o.useEffect(()=>{const d=new URLSearchParams(x.search).get("name");d&&h(d)},[x.search]),o.useEffect(()=>{const u=()=>{const d=window.scrollY,m=10,p=Math.min(m,d/300*m);c(p)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]),e.jsxs("section",{id:"hero",className:"relative h-screen flex items-center justify-center text-center text-white overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url(${a})`,backgroundSize:"cover",backgroundPosition:"center",transform:`scale(${1+l/100})`,filter:`blur(${l}px)`,transition:"filter 0.1s ease-out"},children:e.jsx("img",{src:a,alt:"Hero",className:"hidden",onLoad:n})}),e.jsx("div",{className:"absolute inset-0 bg-black opacity-40"}),e.jsxs("div",{className:"relative z-10 p-6 animate-fade-in-up",children:[i&&e.jsxs("h2",{className:"font-serif text-xl md:text-3xl mb-4",children:["Kepada ",i," & Pasangan,"]}),e.jsx("h2",{className:"font-serif text-3xl md::text-5xl mb-4",children:"Anda Diundang Untuk Merayakan Pernikahan"}),e.jsxs("h1",{className:"font-serif text-6xl md:text-8xl font-bold mb-2",children:[t," & ",s]}),e.jsx("p",{className:"text-2xl md:text-3xl font-light mb-8",children:r}),e.jsx("a",{href:"#story",onClick:u=>{u.preventDefault();const d=document.getElementById("bride-groom");d&&d.scrollIntoView({behavior:"smooth"})},className:"mt-4 inline-block bg-rose-gold hover:bg-opacity-80 text-white font-semibold py-3 px-8 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105",children:"Selengkapnya"})]}),e.jsx("div",{className:"absolute bottom-10 left-1/2 transform -translate-x-1/2 animate-pulse-slow",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-8 h-8 text-white",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 5.25 7.5 7.5 7.5-7.5m-15 6 7.5 7.5 7.5-7.5"})})})]})},P=({children:t,className:s="",id:r,title:a})=>{const n=o.useRef(null),[l,c]=o.useState(!1);return o.useEffect(()=>{const x=new IntersectionObserver(([i])=>{i.isIntersecting&&(c(!0),x.unobserve(i.target))},{threshold:.1});return n.current&&x.observe(n.current),()=>{n.current&&x.unobserve(n.current)}},[]),e.jsx("section",{id:r,className:`py-16 md:py-24 px-6 md:px-12 ${s}`,ref:n,children:e.jsxs("div",{className:"container mx-auto max-w-5xl",children:[a&&e.jsxs("div",{className:"flex items-center justify-center mb-12",children:[e.jsx("div",{className:`flex-grow border-t border-rose-gold ${l?"line-expand line-expand-left":""}`}),e.jsx("h2",{className:"text-2xl md:text-5xl font-serif text-rose-gold mx-4 md:mx-8 text-center",children:a}),e.jsx("div",{className:`flex-grow border-t border-rose-gold ${l?"line-expand line-expand-right":""}`})]}),t&&e.jsx("div",{className:`${l?"fade-in-slide-up":""}`,children:t})]})})},Ce=({title:t,story:s})=>e.jsx(P,{id:"story",className:"bg-soft-blush pattern2-bg",title:t,children:e.jsx("div",{className:"text-center animate-fade-in-up",children:e.jsx("p",{className:"text-lg md:text-xl text-charcoal-gray leading-relaxed max-w-3xl mx-auto",children:s})})}),Ie={width:"100%",height:"250px"},V=({event:t,icon:s})=>{const{isLoaded:r}=le({id:"google-map-script",googleMapsApiKey:"AIzaSyC7DMW481fRN8f_QQ_ahKRF1VjCI4haIK0"}),a={lat:t.latitude,lng:t.longitude};return e.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-xl w-full text-center hover:shadow-2xl transition-shadow duration-300 transform hover:-translate-y-1",children:[e.jsx("div",{className:"flex justify-center text-rose-gold mb-6",children:s}),e.jsx("h3",{className:"text-3xl font-serif text-deep-green mb-4",children:t.title}),e.jsx("p",{className:"text-xl text-charcoal-gray font-semibold mb-2",children:t.time}),e.jsx("p",{className:"text-lg text-charcoal-gray mb-1",children:t.venue}),e.jsx("p",{className:"text-md text-slate-600 mb-4",children:t.address}),t.details&&e.jsx("p",{className:"text-md text-slate-500 leading-relaxed",children:t.details}),e.jsx("div",{className:"mt-6 rounded-lg overflow-hidden",children:r?e.jsx(ie,{mapContainerStyle:Ie,center:a,zoom:15,children:e.jsx(ce,{position:a})}):e.jsx("div",{className:"flex items-center justify-center h-full bg-gray-200 text-gray-600",children:"Memuat Peta..."})}),e.jsx("a",{href:`https://www.google.com/maps/dir/?api=1&destination=${t.latitude},${t.longitude}`,target:"_blank",rel:"noopener noreferrer",className:"mt-4 inline-block bg-deep-green hover:bg-opacity-90 text-white font-semibold py-3 px-6 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105",children:"Petunjuk Arah"})]})},Pe=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-16 h-16",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"})}),Le=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-16 h-16",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.25 9.75L16.5 12l-2.25 2.25m-4.5 0L7.5 12l2.25-2.25M6 20.25h12A2.25 2.25 0 0020.25 18V6A2.25 2.25 0 0018 3.75H6A2.25 2.25 0 003.75 6v12A2.25 2.25 0 006 20.25Z"})}),De=({ceremony:t,reception:s})=>e.jsxs(P,{id:"event",className:"bg-cream pattern-bg",title:"Detail Acara",children:[e.jsx("div",{className:"text-center mb-16 animate-fade-in-up",children:e.jsx("p",{className:"text-lg text-slate-600",children:"Bergabunglah dengan kami untuk momen-momen istimewa ini."})}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-10 md:gap-12 animate-fade-in-up",style:{animationDelay:"0.3s"},children:[e.jsx(V,{event:t,icon:e.jsx(Pe,{})}),e.jsx(V,{event:s,icon:e.jsx(Le,{})})]})]}),Ae=({rsvpDate:t})=>{const s=$(),a=new URLSearchParams(s.search).get("name");return e.jsx(P,{id:"rsvp",className:"bg-soft-blush pattern2-bg",title:"Mohon Konfirmasi Kehadiran",children:e.jsxs("div",{className:"text-center animate-fade-in-up",children:[e.jsxs("p",{className:"text-lg md:text-xl text-charcoal-gray mb-4",children:["Mohon beri tahu kami apakah Anda dapat merayakan bersama kami sebelum ",e.jsx("strong",{className:"text-deep-green",children:t}),"."]}),e.jsx("p",{className:"text-md text-slate-600 mb-10",children:"Klik tombol untuk mengakses formulir RSVP kami."}),e.jsx("div",{className:"flex flex-col items-center space-y-8",children:e.jsx(R,{to:a?`/rsvp?name=${a}`:"/rsvp",className:"inline-block bg-deep-green hover:bg-opacity-90 text-white font-semibold py-4 px-10 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105 text-lg",children:"RSVP Online"})}),e.jsx("p",{className:"mt-8 text-sm text-slate-500",children:"Kami tidak sabar untuk berbagi hari istimewa kami dengan Anda!"})]})})},Ee=({className:t=""})=>e.jsx("div",{className:`animate-shimmer bg-slate-300 rounded-lg ${t}`,"aria-busy":"true","aria-live":"polite",role:"status"}),$e=({src:t,alt:s})=>{const[r,a]=o.useState(!1),[n,l]=o.useState(!1),c=()=>{a(!0)},x=()=>{console.error(`Failed to load image: ${t}`),l(!0),a(!0)};return e.jsxs("div",{className:"aspect-w-4 aspect-h-3 rounded-lg overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:scale-105 group",children:[!r&&e.jsx(Ee,{className:"w-full h-full"}),n&&e.jsxs("div",{className:"w-full h-full bg-slate-200 flex items-center justify-center text-slate-500",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-12 h-12",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})}),e.jsxs("span",{className:"sr-only",children:["Error loading image: ",s]})]}),!n&&e.jsx("img",{src:t,alt:s,className:`object-cover w-full h-full transition-opacity duration-500 ${r?"opacity-100":"opacity-0"}`,onLoad:c,onError:x,loading:"lazy"})]})},Me=({images:t})=>e.jsxs(P,{id:"gallery",className:"bg-cream pattern-bg",title:"Momen Kami",children:[e.jsx("div",{className:"text-center mb-16 animate-fade-in-up",children:e.jsx("p",{className:"text-lg text-slate-600",children:"Sekilas perjalanan kami bersama."})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 md:gap-8 animate-fade-in-up",style:{animationDelay:"0.3s"},children:t.map((s,r)=>e.jsx($e,{src:s.src,alt:s.alt},r))})]}),Re=()=>{const t=new Date().getFullYear();return e.jsx("footer",{className:"bg-deep-green text-cream py-10 text-center",children:e.jsxs("div",{className:"container mx-auto px-6",children:[e.jsxs("p",{className:"font-serif text-lg mb-2",children:[y.brideName," & ",y.groomName]}),e.jsx("p",{className:"text-sm mb-4",children:y.footerMessage}),e.jsxs("p",{className:"text-xs",children:["© ",t," Semua Hak Dilindungi. Dibuat dengan kegembiraan."]})]})})},Ge=({brideName:t,groomName:s})=>e.jsx(P,{className:"bg-soft-blush text-center pattern2-bg",title:"Dengan Segenap Cinta Kami,",children:e.jsxs("div",{className:"animate-fade-in-up",children:[e.jsxs("p",{className:"text-4xl font-serif text-deep-green font-semibold",children:[t," & ",s]}),e.jsx("div",{className:"mt-8 text-rose-gold",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"1",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})})]})}),K=({isOpen:t,onClose:s,onConfirm:r,message:a})=>e.jsx("div",{className:`fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50
        transition-opacity duration-300 ease-out backdrop-blur-sm
        ${t?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,children:e.jsxs("div",{className:`bg-white p-6 rounded-lg shadow-xl max-w-sm w-full mx-4
          transform transition-transform duration-300 ease-out
          ${t?"scale-100":"scale-95"}`,children:[e.jsx("p",{className:"text-lg font-semibold mb-4 text-center",children:a}),e.jsxs("div",{className:"flex justify-around space-x-4",children:[e.jsx("button",{onClick:r,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition",children:"Confirm"}),e.jsx("button",{onClick:s,className:"flex-1 px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400 transition",children:"Cancel"})]})]})}),Ve="https://xuholrwaxrnyfivdzjao.supabase.co",Oe="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh1aG9scndheHJueWZpdmR6amFvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTExMjQ0NTMsImV4cCI6MjA2NjcwMDQ1M30.35p1Rp6W8WOkuGZu8KbYt97PjOAxJR17C8zD_2KN6Cw",C=de(Ve,Oe);function H(t,s){const[r,a]=o.useState(t);return o.useEffect(()=>{const n=setTimeout(()=>{a(t)},s);return()=>{clearTimeout(n)}},[t,s]),r}const Te=(t,s,r)=>{const[a,n]=o.useState([]),[l,c]=o.useState(!0),[x,i]=o.useState(null),[h,u]=o.useState(0),d=H(r,500);o.useEffect(()=>{m()},[t,s,d]);const m=async()=>{c(!0);const p=(t-1)*s,g=p+s-1;let b=C.from("guests").select("id, name, status, email, plusoneqty, plusonename",{count:"exact"});d&&(b=b.or(`name.ilike.%${d}%,email.ilike.%${d}%`));const{data:w,error:v,count:I}=await b.range(p,g);v?(console.error("Error fetching guests:",v),i("Failed to load guests."),S.error("Failed to load guests.")):(n(w),u(I||0)),c(!1)};return{guests:a,loading:l,error:x,totalGuests:h,fetchGuests:m,deleteGuest:async p=>{const{error:g}=await C.from("guests").delete().eq("id",p);if(g)throw console.error("Error deleting guest:",g),i("Failed to delete guest."),S.error("Failed to delete guest."),g;await m(),S.success("Guest deleted successfully.")}}},Be=()=>e.jsxs("div",{className:"overflow-x-auto animate-pulse",children:[e.jsx("div",{className:"mb-4 h-10 bg-gray-200 rounded-md"}),e.jsxs("table",{className:"min-w-full bg-white border border-gray-200 shadow-md rounded-lg",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-3 px-4 border-b bg-gray-100 text-left text-sm font-medium text-gray-500 uppercase tracking-wider w-1/4",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})}),e.jsx("th",{className:"py-3 px-4 border-b bg-gray-100 text-left text-sm font-medium text-gray-500 uppercase tracking-wider w-1/4",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})}),e.jsx("th",{className:"py-3 px-4 border-b bg-gray-100 text-left text-sm font-medium text-gray-500 uppercase tracking-wider w-1/3",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3"})}),e.jsx("th",{className:"py-3 px-4 border-b bg-gray-100 text-left text-sm font-medium text-gray-500 uppercase tracking-wider w-1/6",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})}),e.jsx("th",{className:"py-3 px-4 border-b bg-gray-100 text-left text-sm font-medium text-gray-500 uppercase tracking-wider w-1/6",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})}),e.jsx("th",{className:"py-3 px-4 border-b bg-gray-100 text-center text-sm font-medium text-gray-500 uppercase tracking-wider w-1/12",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mx-auto"})})]})}),e.jsx("tbody",{children:[...Array(5)].map((t,s)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"py-4 px-4 border-b",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})}),e.jsx("td",{className:"py-4 px-4 border-b",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})}),e.jsx("td",{className:"py-4 px-4 border-b",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded w-full"})}),e.jsx("td",{className:"py-4 px-4 border-b",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})}),e.jsx("td",{className:"py-4 px-4 border-b",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})}),e.jsx("td",{className:"py-4 px-4 border-b text-center",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mx-auto"})})]},s))})]})]}),G=({currentPage:t,totalPages:s,onPageChange:r})=>{const a=[];for(let n=1;n<=s;n++)a.push(n);return e.jsxs("nav",{className:"flex justify-center items-center space-x-2 mt-8",children:[e.jsx("button",{onClick:()=>r(t-1),disabled:t===1,className:"px-4 py-2 border rounded-md bg-white text-charcoal-gray disabled:opacity-50 disabled:cursor-not-allowed",children:"Sebelumnya"}),a.map(n=>e.jsx("button",{onClick:()=>r(n),className:`px-4 py-2 border rounded-md ${n===t?"bg-rose-gold text-white":"bg-white text-charcoal-gray"}`,children:n},n)),e.jsx("button",{onClick:()=>r(t+1),disabled:t===s,className:"px-4 py-2 border rounded-md bg-white text-charcoal-gray disabled:opacity-50 disabled:cursor-not-allowed",children:"Selanjutnya"})]})},Fe=()=>{const[t,s]=o.useState(1),r=10,[a,n]=o.useState(""),{guests:l,loading:c,error:x,totalGuests:i,deleteGuest:h}=Te(t,r,a),[u,d]=o.useState(null),[m,f]=o.useState("asc"),[p,g]=o.useState(null),[b,w]=o.useState(!1),v=Math.ceil(i/r),I=j=>{s(j)},N=j=>{n(j.target.value),s(1)},A=o.useMemo(()=>{let j=[...l];return u&&j.sort((Q,X)=>{const L=Q[u],D=X[u];return typeof L=="string"&&typeof D=="string"?m==="asc"?L.localeCompare(D):D.localeCompare(L):typeof L=="number"&&typeof D=="number"?m==="asc"?L-D:D-L:0}),j},[l,u,m]),E=j=>{u===j?f(m==="asc"?"desc":"asc"):(d(j),f("asc"))},W=j=>{switch(j){case"attending":return"bg-green-100 text-green-800";case"not_attending":return"bg-red-100 text-red-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return""}},U=j=>{switch(j){case"attending":return e.jsx(k,{icon:xe,className:"mr-1"});case"not_attending":return e.jsx(k,{icon:ue,className:"mr-1"});case"pending":return e.jsx(k,{icon:me,className:"mr-1"});default:return null}},J=j=>{g(j),w(!0)},Y=async()=>{if(p)try{await h(p.id),g(null),w(!1)}catch{}},Z=()=>{g(null),w(!1)};return e.jsxs("div",{className:"overflow-x-auto",children:[e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"text",placeholder:"Search guests by name or email...",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-rose-gold",value:a,onChange:N})}),c?e.jsx(Be,{}):x?e.jsxs("div",{className:"text-center py-4 text-red-500",children:["Error: ",x]}):A.length===0&&!a?e.jsx("p",{className:"text-sm sm:text-base",children:"No guests yet."}):A.length===0&&a?e.jsxs("p",{className:"text-sm sm:text-base",children:['No guests found for "',a,'".']}):e.jsxs("table",{className:"min-w-full bg-white border border-gray-200 shadow-md rounded-lg",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsxs("th",{className:"py-2 px-2 sm:py-3 sm:px-4 border-b cursor-pointer text-left text-sm sm:text-base",onClick:()=>E("name"),children:["Name ",u==="name"&&(m==="asc"?"▲":"▼")]}),e.jsxs("th",{className:"py-2 px-2 sm:py-3 sm:px-4 border-b cursor-pointer text-left text-sm sm:text-base",onClick:()=>E("status"),children:["Status ",u==="status"&&(m==="asc"?"▲":"▼")]}),e.jsxs("th",{className:"py-2 px-2 sm:py-3 sm:px-4 border-b cursor-pointer text-left text-sm sm:text-base",onClick:()=>E("email"),children:["Email ",u==="email"&&(m==="asc"?"▲":"▼")]}),e.jsxs("th",{className:"py-2 px-2 sm:py-3 sm:px-4 border-b cursor-pointer text-left text-sm sm:text-base",onClick:()=>E("plusoneqty"),children:["Plus One Qty ",u==="plusoneqty"&&(m==="asc"?"▲":"▼")]}),e.jsxs("th",{className:"py-2 px-2 sm:py-3 sm:px-4 border-b cursor-pointer text-left text-sm sm:text-base",onClick:()=>E("plusonename"),children:["Plus One Name ",u==="plusonename"&&(m==="asc"?"▲":"▼")]}),e.jsx("th",{className:"py-2 px-2 sm:py-3 sm:px-4 border-b text-center text-sm sm:text-base",children:"Actions"})]})}),e.jsx("tbody",{children:A.map(j=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-2 sm:py-3 sm:px-4 border-b text-left text-sm sm:text-base",children:j.name}),e.jsx("td",{className:"py-2 px-2 sm:py-3 sm:px-4 border-b text-left",children:e.jsxs("span",{className:`inline-flex items-center px-1.5 py-0.5 sm:px-2.5 sm:py-0.5 rounded-full text-xs sm:text-sm font-medium ${W(j.status)}`,children:[U(j.status)," ",j.status]})}),e.jsx("td",{className:"py-2 px-2 sm:py-3 sm:px-4 border-b text-left text-sm sm:text-base",children:j.email}),e.jsx("td",{className:"py-2 px-2 sm:py-3 sm:px-4 border-b text-left text-sm sm:text-base",children:j.plusoneqty}),e.jsx("td",{className:"py-2 px-2 sm:py-3 sm:px-4 border-b text-left text-sm sm:text-base",children:j.plusonename||"N/A"}),e.jsx("td",{className:"py-2 px-2 sm:py-3 sm:px-4 border-b text-center",children:e.jsxs("button",{onClick:()=>J(j),className:"text-red-600 hover:text-red-900 font-medium flex items-center mx-auto space-x-1 text-sm sm:text-base",children:[e.jsx(k,{icon:O}),e.jsx("span",{children:"Delete"})]})})]},j.id))})]}),!c&&v>1&&e.jsx(G,{currentPage:t,totalPages:v,onPageChange:I}),e.jsx(K,{isOpen:b,onClose:Z,onConfirm:Y,message:`Are you sure you want to delete guest ${p==null?void 0:p.name}?`})]})},q=(t,s,r)=>{const[a,n]=o.useState([]),[l,c]=o.useState(!0),[x,i]=o.useState(null),[h,u]=o.useState(0),d=H(r,500);o.useEffect(()=>{m()},[t,s,d]);const m=async()=>{c(!0);const g=(t-1)*s,b=g+s-1;let w=C.from("comments").select("id, author, message, timestamp",{count:"exact"}).order("timestamp",{ascending:!1});d&&(w=w.or(`message.ilike.%${d}%,author.ilike.%${d}%`));const{data:v,error:I,count:N}=await w.range(g,b);I?(console.error("Error fetching comments:",I),i("Gagal memuat komentar."),S.error("Gagal memuat komentar.")):(n(v),u(N||0)),c(!1)};return{comments:a,loading:l,error:x,totalComments:h,addComment:async g=>{const{data:{user:b}}=await C.auth.getUser(),w=b&&b.email||"Anonymous",{data:v,error:I}=await C.from("comments").insert({author:w,message:g,timestamp:new Date().toISOString()}).select();if(I)throw console.error("Error posting comment:",I),i("Gagal mengirim komentar. Silakan coba lagi."),S.error("Gagal mengirim komentar. Silakan coba lagi."),I;v&&(await m(),S.success("Komentar berhasil dikirim."))},deleteComment:async g=>{console.log("Attempting to delete comment with ID:",g);const{error:b}=await C.from("comments").delete().eq("id",g);if(b)throw console.error("Error deleting comment:",b),i("Gagal menghapus komentar."),S.error("Gagal menghapus komentar."),b;await m(),S.success("Komentar berhasil dihapus.")}}},Ke=()=>{const[t,s]=o.useState(1),r=5,[a,n]=o.useState(""),{comments:l,loading:c,error:x,totalComments:i,deleteComment:h}=q(t,r,a),[u,d]=o.useState(null),[m,f]=o.useState(!1),p=Math.ceil(i/r),g=N=>{s(N)},b=N=>{n(N.target.value),s(1)},w=N=>{d(N),f(!0)},v=async()=>{if(u)try{await h(u.id),d(null),f(!1)}catch{}},I=()=>{d(null),f(!1)};return e.jsxs("div",{className:"mt-8 p-2 sm:p-0",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-4",children:"Manage Comments"}),e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"text",placeholder:"Search comments...",value:a,onChange:b,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-rose-gold focus:border-rose-gold"})}),c?e.jsx("div",{className:"space-y-4",children:[...Array(r)].map((N,A)=>e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-300 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-3 bg-gray-300 rounded w-1/2"})]},A))}):x?e.jsxs("div",{className:"text-center text-red-500",children:["Error: ",x]}):l.length===0&&!a?e.jsx("p",{className:"text-sm sm:text-base",children:"No comments yet."}):l.length===0&&a?e.jsxs("p",{className:"text-sm sm:text-base",children:['No comments found for "',a,'".']}):e.jsx("div",{className:"bg-white shadow overflow-hidden rounded-lg",children:e.jsx("ul",{className:"divide-y divide-gray-200",children:l.map(N=>e.jsxs("li",{className:"px-3 py-3 sm:px-6 sm:py-4 flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[e.jsxs("div",{className:"mb-2 sm:mb-0",children:[e.jsx("p",{className:"text-base sm:text-lg font-medium text-gray-900",children:N.message}),e.jsxs("p",{className:"text-xs sm:text-sm text-gray-500",children:["- ",N.author," (",new Date(N.timestamp).toLocaleString(),")"]})]}),e.jsxs("button",{onClick:()=>w(N),className:"ml-0 sm:ml-4 inline-flex items-center px-2 py-1 sm:px-3 sm:py-2 border border-transparent text-xs sm:text-sm leading-4 font-medium rounded-md shadow-sm text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 space-x-1",children:[e.jsx(k,{icon:O}),e.jsx("span",{children:"Delete"})]})]},N.id))})}),!c&&p>1&&e.jsx(G,{currentPage:t,totalPages:p,onPageChange:g}),e.jsx(K,{isOpen:m,onClose:I,onConfirm:v,message:`Are you sure you want to delete this comment from ${u==null?void 0:u.author}?`})]})},He=()=>{const t=T(),[s,r]=o.useState(0);o.useEffect(()=>{(async()=>{const{data:l,error:c}=await C.from("guests").select("plusoneqty").eq("status","attending");if(c)console.error("Error fetching confirmed guests:",c);else{const x=l.reduce((i,h)=>i+(h.plusoneqty||0),0);r(x)}})()},[]);const a=()=>{localStorage.removeItem("adminLoggedIn"),t("/")};return e.jsxs("div",{className:"container mx-auto px-4 py-8 pt-16 sm:px-6 lg:px-8 mt-16",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold mb-4 sm:mb-0",children:"Admin Dashboard"}),e.jsx("button",{onClick:a,className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out text-sm sm:text-base",children:"Logout"})]}),e.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl shadow-md mb-8",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-deep-green mb-4",children:"Guest Summary"}),e.jsxs("p",{className:"text-base sm:text-lg text-charcoal-gray",children:["Total Guests Confirmed: ",e.jsx("span",{className:"font-semibold",children:s})]})]}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-4",children:"Guest List"}),e.jsx(Fe,{}),e.jsx(Ke,{})]})},qe=()=>{const[t,s]=o.useState(!1),[r,a]=o.useState(null);return{submitting:t,error:r,submitRSVP:async(l,c,x,i,h)=>{s(!0),a(null);const{error:u}=await C.from("guests").insert({name:l,email:c,status:x,plusoneqty:i});if(u)throw console.error("Error submitting RSVP:",u),a("Gagal mengirim RSVP."),S.error("Gagal mengirim RSVP."),s(!1),u;if(h.trim()){const{error:d}=await C.from("comments").insert({author:l,message:h,timestamp:new Date().toISOString()});d&&(console.error("Error posting comment from RSVP:",d),S.error("Gagal mengirim komentar, tetapi RSVP Anda telah dikirim."))}s(!1),S.success("RSVP berhasil dikirim!")}}},_e=()=>{const t=$(),[s,r]=o.useState({name:"",email:"",status:null,guests:1,message:""}),[a,n]=o.useState(!1),{submitting:l,submitRSVP:c}=qe();o.useEffect(()=>{window.scrollTo(0,0)},[]),o.useEffect(()=>{const h=new URLSearchParams(t.search).get("name");h&&r(u=>({...u,name:h}))},[t.search]);const x=async i=>{i.preventDefault();try{await c(s.name,s.email,s.status||"pending",s.guests,s.message),n(!0)}catch{}};return a?e.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-cream p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-serif text-deep-green mb-4",children:"Terima Kasih!"}),e.jsx("p",{className:"text-lg text-charcoal-gray mb-8",children:"RSVP Anda telah diterima."}),e.jsx(R,{to:"/",className:"text-rose-gold hover:underline",children:"← Kembali ke Beranda"})]})}):e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-cream p-4 sm:p-8",children:e.jsxs("div",{className:"w-full max-w-2xl mx-auto bg-white p-8 sm:p-12 rounded-xl shadow-2xl",children:[e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("h1",{className:"text-4xl sm:text-5xl font-serif text-deep-green",children:"RSVP"}),e.jsx("p",{className:"text-lg text-slate-600 mt-2",children:"Kami sangat senang dapat merayakan bersama Anda!"})]}),e.jsxs("form",{onSubmit:x,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-md font-semibold text-charcoal-gray mb-2",children:"Nama Lengkap"}),e.jsx("input",{type:"text",id:"name",value:s.name,onChange:i=>r({...s,name:i.target.value}),required:!0,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-rose-gold focus:border-transparent transition",placeholder:"Nama lengkap Anda"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-md font-semibold text-charcoal-gray mb-2",children:"Alamat Email (Opsional)"}),e.jsx("input",{type:"email",id:"email",value:s.email,onChange:i=>r({...s,email:i.target.value}),className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-rose-gold focus:border-transparent transition",placeholder:"your.email@example.com"})]}),e.jsxs("fieldset",{className:"space-y-4",children:[e.jsx("legend",{className:"block text-md font-semibold text-charcoal-gray mb-2",children:"Apakah Anda akan hadir?"}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"attending",value:"yes",checked:s.status==="attending",onChange:()=>r({...s,status:"attending"}),required:!0,className:"h-5 w-5 text-deep-green focus:ring-rose-gold"}),e.jsx("span",{className:"text-sm",children:"Ya, saya akan hadir!"})]}),e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"attending",value:"no",checked:s.status==="not_attending",onChange:()=>r({...s,status:"not_attending"}),required:!0,className:"h-5 w-5 text-deep-green focus:ring-rose-gold"}),e.jsx("span",{className:"text-sm",children:"Tidak, saya akan merayakan dari jauh."})]}),e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"attending",value:"pending",checked:s.status==="pending",onChange:()=>r({...s,status:"pending"}),required:!0,className:"h-5 w-5 text-deep-green focus:ring-rose-gold"}),e.jsx("span",{className:"text-sm",children:"Mungkin, saya belum yakin."})]})]})]}),s.status==="attending"&&e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"guests",className:"block text-md font-semibold text-charcoal-gray mb-2",children:"Jumlah Tamu (termasuk Anda)"}),e.jsx("input",{type:"number",id:"guests",value:s.guests,onChange:i=>r({...s,guests:parseInt(i.target.value,10)}),min:"1",max:"10",required:!0,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-rose-gold focus:border-transparent transition"})]})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"message",className:"block text-md font-semibold text-charcoal-gray mb-2",children:"Tinggalkan pesan untuk pasangan (opsional)"}),e.jsx("textarea",{id:"message",value:s.message,onChange:i=>r({...s,message:i.target.value}),rows:4,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-rose-gold focus:border-transparent transition",placeholder:"Bagikan kenangan atau ucapan selamat..."})]}),e.jsx("div",{className:"text-center pt-4",children:e.jsx("button",{type:"submit",className:"w-full sm:w-auto bg-deep-green hover:bg-opacity-90 text-white font-bold py-4 px-12 rounded-lg shadow-lg transition duration-300 ease-in-out transform hover:scale-105",disabled:l,children:l?"Mengirim...":"Kirim RSVP"})})]}),e.jsx("div",{className:"text-center mt-8",children:e.jsx(R,{to:"/",className:"text-sm text-rose-gold hover:underline",children:"← Kembali ke situs utama"})})]})})},ze=({comments:t})=>e.jsx("div",{className:"space-y-4",children:t.map(s=>e.jsxs("div",{className:`bg-white p-4 rounded-lg shadow ${s.isOptimistic?"opacity-70 animate-pulse":""}`,children:[e.jsx("p",{className:"text-charcoal-gray",children:s.message}),e.jsxs("p",{className:"text-sm text-slate-500 text-right",children:["- ",s.author]})]},s.id))}),We=({onSubmit:t,isSubmitting:s=!1})=>{const[r,a]=o.useState(""),n=l=>{l.preventDefault(),r.trim()&&(t(r),a(""))};return e.jsxs("form",{onSubmit:n,className:"mt-8",children:[e.jsx("textarea",{value:r,onChange:l=>a(l.target.value),className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-rose-gold focus:border-transparent transition",placeholder:"Tinggalkan pesan untuk pasangan...",rows:4}),e.jsx("button",{type:"submit",className:`mt-4 bg-deep-green text-white font-bold py-3 px-8 rounded-lg shadow-lg transition duration-300 ease-in-out ${s?"opacity-50 cursor-not-allowed":"hover:bg-opacity-90 transform hover:scale-105"}`,disabled:s,children:s?"Mengirim...":"Kirim Komentar"})]})},Ue=()=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 shadow-sm animate-pulse bg-white",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("div",{className:"h-4 bg-gray-300 rounded w-1/4"}),e.jsx("div",{className:"ml-auto h-3 bg-gray-200 rounded w-1/6"})]}),e.jsx("div",{className:"h-4 bg-gray-300 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]}),Je=()=>{const[t,s]=o.useState(1),r=5,{comments:a,loading:n,error:l,totalComments:c,addComment:x}=q(t,r),[i,h]=o.useState(!1),u=Math.ceil(c/r),d=f=>{s(f)},m=async f=>{h(!0);try{await x(f),s(1)}catch{}h(!1)};return e.jsxs(P,{id:"comments",className:"bg-cream pattern-bg",title:"Komentar Tamu",children:[e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-lg md:text-xl text-charcoal-gray mb-8",children:"Tinggalkan pesan untuk pasangan bahagia!"})}),e.jsx(We,{onSubmit:m,isSubmitting:i}),l&&e.jsx("div",{className:"text-center py-2 text-red-500",children:l}),e.jsxs("div",{className:"mt-12",children:[n?e.jsx("div",{className:"space-y-4",children:[...Array(r)].map((f,p)=>e.jsx(Ue,{},p))}):e.jsx(ze,{comments:a}),!n&&u>1&&e.jsx(G,{currentPage:t,totalPages:u,onPageChange:d})]})]})},_=()=>{const[t,s]=o.useState(null),[r,a]=o.useState(!0);return o.useEffect(()=>{(async()=>{const{data:{session:i}}=await C.auth.getSession();s(i),a(!1)})();const{data:x}=C.auth.onAuthStateChange((i,h)=>{s(h)});return()=>{x.subscription.unsubscribe()}},[]),{session:t,loading:r,signIn:async(c,x)=>{const{error:i}=await C.auth.signInWithPassword({email:c,password:x});if(i)throw S.error(i.message),i},signOut:async()=>{const{error:c}=await C.auth.signOut();if(c)throw S.error(c.message),c}}},Ye=()=>{const[t,s]=o.useState(""),[r,a]=o.useState(""),[n,l]=o.useState(""),c=T(),{signIn:x}=_(),i=async h=>{h.preventDefault(),l("");try{await x(t,r),c("/admin")}catch(u){l(u.message)}};return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-cream p-4",children:e.jsxs("div",{className:"w-full max-w-md bg-white p-8 rounded-xl shadow-2xl",children:[e.jsx("h1",{className:"text-3xl font-serif text-deep-green text-center mb-8",children:"Admin Login"}),n&&e.jsx("p",{className:"text-red-500 text-center mb-4",children:n}),e.jsxs("form",{onSubmit:i,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"block text-md font-semibold text-charcoal-gray mb-2",children:"Username"}),e.jsx("input",{type:"text",id:"username",value:t,onChange:h=>s(h.target.value),className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-rose-gold focus:border-transparent transition",placeholder:"admin",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-md font-semibold text-charcoal-gray mb-2",children:"Password"}),e.jsx("input",{type:"password",id:"password",value:r,onChange:h=>a(h.target.value),className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-rose-gold focus:border-transparent transition",placeholder:"password",required:!0})]}),e.jsx("button",{type:"submit",className:"w-full bg-deep-green hover:bg-opacity-90 text-white font-bold py-3 px-8 rounded-lg shadow-lg transition duration-300 ease-in-out transform hover:scale-105",children:"Login"})]})]})})},Ze=({children:t})=>{const{session:s,loading:r}=_();return r?e.jsx("div",{children:"Loading..."}):s?e.jsx(e.Fragment,{children:t}):e.jsx(ge,{to:"/login",replace:!0})},Qe=({brideName:t,brideDob:s,brideImage:r,groomName:a,groomDob:n,groomImage:l})=>e.jsx(P,{id:"bride-groom",className:"bg-cream pattern-bg",title:"Mengenal Pasangan",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center gap-12 text-center",children:[e.jsxs("div",{className:"flex flex-col items-center animate-fade-in-up",children:[e.jsx("img",{src:r,alt:t,className:"w-48 h-48 rounded-full object-cover shadow-lg mb-4 border-4 border-rose-gold"}),e.jsx("h3",{className:"text-3xl font-serif text-deep-green mb-2",children:t}),e.jsxs("p",{className:"text-lg text-charcoal-gray",children:["Lahir: ",s]})]}),e.jsx("div",{className:"text-5xl font-serif text-rose-gold hidden md:block",children:"&"}),e.jsxs("div",{className:"flex flex-col items-center animate-fade-in-up",style:{animationDelay:"0.2s"},children:[e.jsx("img",{src:l,alt:a,className:"w-48 h-48 rounded-full object-cover shadow-lg mb-4 border-4 border-rose-gold"}),e.jsx("h3",{className:"text-3xl font-serif text-deep-green mb-2",children:a}),e.jsxs("p",{className:"text-lg text-charcoal-gray",children:["Lahir: ",n]})]})]})}),Xe=({groom:t,bride:s})=>{const[r,a]=o.useState({loaded:!1,error:!1,src:t.image}),[n,l]=o.useState({loaded:!1,error:!1,src:s.image}),c={groom:"https://via.placeholder.com/1920x1080/2d5a27/ffffff?text=Groom+Photo",bride:"https://via.placeholder.com/1920x1080/b76e79/ffffff?text=Bride+Photo"};o.useEffect(()=>{const d=(m,f,p)=>{const g=new Image;g.onload=()=>{p({loaded:!0,error:!1,src:m})},g.onerror=()=>{const b=new Image;b.onload=()=>{p({loaded:!0,error:!1,src:f})},b.onerror=()=>{p({loaded:!1,error:!0,src:""})},b.src=f},g.src=m};d(t.image,c.groom,a),d(s.image,c.bride,l)},[t.image,s.image]);const x=d=>!d||d.trim()===""?"#":`https://instagram.com/${d.replace("@","").trim()}`,i=d=>{if(!d||d.trim()==="")return!1;const m=d.replace("@","").trim();return/^[a-zA-Z0-9._]{1,30}$/.test(m)},h=d=>{if(!i(d.instagramHandle))return null;const m=x(d.instagramHandle);return m==="#"?null:e.jsx("div",{className:"partner-instagram",children:e.jsxs("a",{href:m,target:"_blank",rel:"noopener noreferrer",className:"instagram-link","aria-label":`Visit ${d.fullName}'s Instagram profile`,onClick:f=>{(m==="#"||!m.includes("instagram.com"))&&(f.preventDefault(),console.warn("Invalid Instagram URL:",m))},children:[e.jsx(k,{icon:pe,className:"instagram-icon"}),e.jsxs("span",{children:["@",d.instagramHandle.replace("@","")]})]})})},u=(d,m,f)=>{const p=["partner-section",`${f}-section`,m.loaded?"":"loading",m.error?"error":""].filter(Boolean).join(" "),g={};return m.loaded&&m.src?g.backgroundImage=`url(${m.src})`:m.error&&(g.background=f==="groom"?"linear-gradient(135deg, #2d5a27 0%, #4a7c59 100%)":"linear-gradient(135deg, #b76e79 0%, #d4a5a5 100%)"),e.jsx("section",{className:p,style:g,role:"region","aria-labelledby":`${f}-heading`,children:e.jsx("div",{className:"partner-overlay",children:e.jsxs("div",{className:"partner-content",children:[!m.loaded&&!m.error&&e.jsxs("div",{className:"loading-indicator","aria-label":"Loading partner photo",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{className:"loading-text",children:"Loading photo..."})]}),m.error&&e.jsxs("div",{className:"error-indicator","aria-label":"Photo unavailable",children:[e.jsx(k,{icon:he,className:"error-icon"}),e.jsx("p",{className:"error-text",children:"Photo unavailable"})]}),e.jsx("h2",{id:`${f}-heading`,className:"partner-name",children:d.fullName||"Name unavailable"}),e.jsx("p",{className:"partner-family-info",children:d.parentInfo||"Family information unavailable"}),h(d)]})})})};return e.jsxs("div",{className:"individual-partner-sections",children:[u(t,r,"groom"),u(s,n,"bride")]})},es=()=>{const[t,s]=o.useState(!0),r=$(),[a,n]=o.useState(window.innerWidth<=768);o.useEffect(()=>{const x=()=>{n(window.innerWidth<=768)};return window.addEventListener("resize",x),()=>{window.removeEventListener("resize",x)}},[]);const l=()=>{s(!1)},c=t&&r.pathname==="/";return e.jsx(we,{children:e.jsxs("div",{className:"min-h-screen bg-cream text-charcoal-gray antialiased",children:[c&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-cream z-50",children:e.jsx("div",{className:"loader ease-linear rounded-full h-32 w-32"})}),!a&&e.jsx(F,{className:"music-player-desktop"}),e.jsx(fe,{}),e.jsx(ke,{brideName:y.brideName,groomName:y.groomName,isMobile:a}),e.jsx("main",{className:c?"hidden":"",children:e.jsxs(be,{children:[e.jsx(M,{path:"/",element:e.jsxs(e.Fragment,{children:[e.jsx(Se,{brideName:y.brideName,groomName:y.groomName,date:y.date,heroImage:y.heroImage,onImageLoad:l}),e.jsx(Qe,{brideName:y.brideName,brideDob:y.brideDob,brideImage:y.brideImage,groomName:y.groomName,groomDob:y.groomDob,groomImage:y.groomImage}),e.jsx(Xe,{groom:y.groomDetails,bride:y.brideDetails}),e.jsx(Ce,{story:y.story,title:y.storyTitle}),e.jsx(De,{ceremony:y.ceremony,reception:y.reception}),e.jsx(Ae,{rsvpDate:y.rsvpByDate}),e.jsx(Me,{images:y.galleryImages}),e.jsx(Ge,{brideName:y.brideName,groomName:y.groomName}),e.jsx(Je,{})]})}),e.jsx(M,{path:"/login",element:e.jsx(Ye,{})}),e.jsx(M,{path:"/admin",element:e.jsx(Ze,{children:e.jsx(He,{})})}),e.jsx(M,{path:"/rsvp",element:e.jsx(_e,{})})]})}),e.jsx(Re,{})]})})},z=document.getElementById("root");if(!z)throw new Error("Could not find root element to mount to");const ss=je.createRoot(z);ss.render(e.jsx(ye.StrictMode,{children:e.jsx(Ne,{children:e.jsx(es,{})})}));
