import{r as c,u as I,j as e,F as N,f as z,a as H,b as Y,c as J,d as _,e as K,G as Z,M as U,L as R,g as Q,V as p,h as M,i as X,k as ee,l as se,m as F,N as te,O as re,R as ae,n as D,o as ne,p as oe,B as le}from"./vendor-DWMdEzGF.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function a(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(r){if(r.ep)return;r.ep=!0;const n=a(r);fetch(r.href,n)}})();const g={brideName:"Angel",brideDob:"January 1, 1995",brideImage:"https://picsum.photos/seed/bride/400/400",groomName:"Matthew",groomDob:"February 14, 1993",groomImage:"https://picsum.photos/seed/groom/400/400",date:"Saturday, October 26, 2024",heroImage:"https://picsum.photos/seed/wedding_hero/1920/1080",storyTitle:"Our Love Story",story:"From a chance encounter to a lifetime of love, our journey has been filled with laughter, adventure, and unwavering support for one another. We discovered a connection that has grown deeper with each passing day, built on shared dreams and a profound understanding. We are incredibly excited to begin this new chapter as husband and wife, and we can't wait to celebrate our special day with you, our dearest family and friends, who have showered us with love and encouragement along the way.",ceremony:{title:"The Ceremony",time:"2:00 PM",venue:"The Enchanted Garden",address:"123 Blossom Lane, Dreamville, CA",details:"Join us as we exchange vows in a beautiful garden setting, surrounded by nature's tranquility.",latitude:34.052235,longitude:-118.243683},reception:{title:"The Reception",time:"6:00 PM",venue:"Starlight Ballroom",address:"456 Celebration Avenue, Dreamville, CA",details:"Celebrate with us! An evening of dinner, dancing, and making memories to last a lifetime awaits.",latitude:34.052235,longitude:-118.243683},rsvpByDate:"September 15, 2024",galleryImages:[{src:"https://picsum.photos/seed/gallery1/800/600",alt:"Couple smiling"},{src:"https://picsum.photos/seed/gallery2/800/600",alt:"Wedding venue detail"},{src:"https://picsum.photos/seed/gallery3/800/600",alt:"Engagement photo"},{src:"https://picsum.photos/seed/gallery4/800/600",alt:"Couple holding hands"},{src:"https://picsum.photos/seed/gallery5/800/600",alt:"Scenic view"},{src:"https://picsum.photos/seed/gallery6/800/600",alt:"Close-up detail"}],footerMessage:"Made with love for our special day."},ie=({brideName:t,groomName:s})=>{const[a,o]=c.useState(!1),[r,n]=c.useState(!1),i=`${t.charAt(0)} & ${s.charAt(0)}`,m=I(),l=m.pathname.startsWith("/admin");c.useEffect(()=>{const y=()=>{n(window.innerWidth<768)};return y(),window.addEventListener("resize",y),()=>window.removeEventListener("resize",y)},[]),c.useEffect(()=>{const y=()=>{o(window.scrollY>50)};if(l)o(!0),window.removeEventListener("scroll",y);else return o(window.scrollY>50),window.addEventListener("scroll",y),()=>window.removeEventListener("scroll",y)},[m.pathname,l]);const d=y=>P=>{P.preventDefault();const E=document.getElementById(y);E&&E.scrollIntoView({behavior:"smooth"})},u=l?!0:r?a:!0,x=l||a,b=`fixed z-50 transition-all duration-300
    ${r?"bottom-4 inset-x-4 rounded-xl":"top-0 left-0 right-0 w-full"}
    ${u?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}
    ${x?"bg-cream/80 shadow-lg backdrop-blur-sm py-3":"bg-transparent py-3"}
  `,w=x?"text-rose-gold":"text-white",C=x?"hover:text-deep-green":"hover:text-rose-gold",v=x?"text-charcoal-gray":"text-white",j="hover:text-rose-gold";return e.jsx("header",{className:b,children:e.jsxs("div",{className:`container mx-auto max-w-6xl flex justify-around md:justify-between items-center px-4 md:px-6
        ${x?"py-3":"py-0"}
      `,children:[e.jsx("a",{href:"#hero",onClick:d("hero"),className:`text-2xl font-serif font-bold ${w} ${C} transition-colors
            ${r?"hidden":"block"}
          `,children:i}),e.jsx("nav",{className:`${r&&!a&&!l?"hidden":""} md:block`,children:e.jsxs("ul",{className:"flex justify-between md:space-x-8 w-full",children:[e.jsx("li",{className:"px-2",children:e.jsxs("a",{href:"#hero",onClick:d("hero"),className:`flex flex-col items-center ${v} ${j} font-medium transition-colors`,children:[e.jsx(N,{icon:z,className:"text-lg md:hidden"}),e.jsx("span",{className:"text-xs md:text-base",children:"Home"})]})}),e.jsx("li",{className:"px-2",children:e.jsxs("a",{href:"#story",onClick:d("story"),className:`flex flex-col items-center ${v} ${j} font-medium transition-colors`,children:[e.jsx(N,{icon:H,className:"text-lg md:hidden"}),e.jsx("span",{className:"text-xs md:text-base",children:"Story"})]})}),e.jsx("li",{className:"px-2",children:e.jsxs("a",{href:"#event",onClick:d("event"),className:`flex flex-col items-center ${v} ${j} font-medium transition-colors`,children:[e.jsx(N,{icon:Y,className:"text-lg md:hidden"}),e.jsx("span",{className:"text-xs md:text-base",children:"Event"})]})}),e.jsx("li",{className:"px-2",children:e.jsxs("a",{href:"#rsvp",onClick:d("rsvp"),className:`flex flex-col items-center ${v} ${j} font-medium transition-colors`,children:[e.jsx(N,{icon:J,className:"text-lg md:hidden"}),e.jsx("span",{className:"text-xs md:text-base",children:"RSVP"})]})}),e.jsx("li",{className:"px-2",children:e.jsxs("a",{href:"#gallery",onClick:d("gallery"),className:`flex flex-col items-center ${v} ${j} font-medium transition-colors`,children:[e.jsx(N,{icon:_,className:"text-lg md:hidden"}),e.jsx("span",{className:"text-xs md:text-base",children:"Gallery"})]})})]})})]})})},ce=({brideName:t,groomName:s,date:a,heroImage:o,onImageLoad:r})=>{const[n,i]=c.useState(0),m=I(),[l,d]=c.useState(null);return c.useEffect(()=>{const x=new URLSearchParams(m.search).get("name");x&&d(x)},[m.search]),c.useEffect(()=>{const u=()=>{const x=window.scrollY,b=10,C=Math.min(b,x/300*b);i(C)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]),e.jsxs("section",{id:"hero",className:"relative h-screen flex items-center justify-center text-center text-white",children:[e.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url(${o})`,backgroundSize:"cover",backgroundPosition:"center",filter:`blur(${n}px)`,transition:"filter 0.1s ease-out"},children:e.jsx("img",{src:o,alt:"Hero",className:"hidden",onLoad:r})}),e.jsx("div",{className:"absolute inset-0 bg-black opacity-40"}),e.jsxs("div",{className:"relative z-10 p-6 animate-fade-in-up",children:[l&&e.jsxs("h2",{className:"font-serif text-xl md:text-3xl mb-4",children:["Dear ",l," & Partner,"]}),e.jsx("h2",{className:"font-serif text-3xl md::text-5xl mb-4",children:"You're Invited To Celebrate The Wedding Of"}),e.jsxs("h1",{className:"font-serif text-6xl md:text-8xl font-bold mb-2",children:[t," & ",s]}),e.jsx("p",{className:"text-2xl md:text-3xl font-light mb-8",children:a}),e.jsx("a",{href:"#story",onClick:u=>{u.preventDefault();const x=document.getElementById("story");x&&x.scrollIntoView({behavior:"smooth"})},className:"mt-4 inline-block bg-rose-gold hover:bg-opacity-80 text-white font-semibold py-3 px-8 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105",children:"Discover More"})]}),e.jsx("div",{className:"absolute bottom-10 left-1/2 transform -translate-x-1/2 animate-pulse-slow",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-8 h-8 text-white",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 5.25 7.5 7.5 7.5-7.5m-15 6 7.5 7.5 7.5-7.5"})})})]})},S=({children:t,className:s="",id:a,title:o})=>{const r=c.useRef(null),[n,i]=c.useState(!1);return c.useEffect(()=>{const m=new IntersectionObserver(([l])=>{l.isIntersecting&&(i(!0),m.unobserve(l.target))},{threshold:.1});return r.current&&m.observe(r.current),()=>{r.current&&m.unobserve(r.current)}},[]),e.jsx("section",{id:a,className:`py-16 md:py-24 px-6 md:px-12 ${s}`,ref:r,children:e.jsxs("div",{className:"container mx-auto max-w-5xl",children:[o&&e.jsxs("div",{className:"flex items-center justify-center mb-12",children:[e.jsx("div",{className:`flex-grow border-t border-rose-gold ${n?"line-expand line-expand-left":""}`}),e.jsx("h2",{className:"text-4xl md:text-5xl font-serif text-rose-gold mx-8 text-center",children:o}),e.jsx("div",{className:`flex-grow border-t border-rose-gold ${n?"line-expand line-expand-right":""}`})]}),t&&e.jsx("div",{className:`${n?"fade-in-slide-up":""}`,children:t})]})})},de=({title:t,story:s})=>e.jsx(S,{id:"story",className:"bg-soft-blush",title:t,children:e.jsx("div",{className:"text-center animate-fade-in-up",children:e.jsx("p",{className:"text-lg md:text-xl text-charcoal-gray leading-relaxed max-w-3xl mx-auto",children:s})})}),me={width:"100%",height:"250px"},A=({event:t,icon:s})=>{const{isLoaded:a}=K({id:"google-map-script",googleMapsApiKey:"AIzaSyC7DMW481fRN8f_QQ_ahKRF1VjCI4haIK0"}),o={lat:t.latitude,lng:t.longitude};return e.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-xl w-full text-center hover:shadow-2xl transition-shadow duration-300 transform hover:-translate-y-1",children:[e.jsx("div",{className:"flex justify-center text-rose-gold mb-6",children:s}),e.jsx("h3",{className:"text-3xl font-serif text-deep-green mb-4",children:t.title}),e.jsx("p",{className:"text-xl text-charcoal-gray font-semibold mb-2",children:t.time}),e.jsx("p",{className:"text-lg text-charcoal-gray mb-1",children:t.venue}),e.jsx("p",{className:"text-md text-slate-600 mb-4",children:t.address}),t.details&&e.jsx("p",{className:"text-md text-slate-500 leading-relaxed",children:t.details}),e.jsx("div",{className:"mt-6 rounded-lg overflow-hidden",children:a?e.jsx(Z,{mapContainerStyle:me,center:o,zoom:15,children:e.jsx(U,{position:o})}):e.jsx("div",{className:"flex items-center justify-center h-full bg-gray-200 text-gray-600",children:"Loading Map..."})})]})},xe=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-16 h-16",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"})}),ue=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-16 h-16",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.25 9.75L16.5 12l-2.25 2.25m-4.5 0L7.5 12l2.25-2.25M6 20.25h12A2.25 2.25 0 0020.25 18V6A2.25 2.25 0 0018 3.75H6A2.25 2.25 0 003.75 6v12A2.25 2.25 0 006 20.25Z"})}),he=({ceremony:t,reception:s})=>e.jsxs(S,{id:"event",className:"bg-cream pattern-bg",title:"Event Details",children:[e.jsx("div",{className:"text-center mb-16 animate-fade-in-up",children:e.jsx("p",{className:"text-lg text-slate-600",children:"Join us for these special moments."})}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-10 md:gap-12 animate-fade-in-up",style:{animationDelay:"0.3s"},children:[e.jsx(A,{event:t,icon:e.jsx(xe,{})}),e.jsx(A,{event:s,icon:e.jsx(ue,{})})]})]}),ge=({rsvpDate:t})=>{const s=I(),o=new URLSearchParams(s.search).get("name");return e.jsx(S,{id:"rsvp",className:"bg-soft-blush",title:"Kindly RSVP",children:e.jsxs("div",{className:"text-center animate-fade-in-up",children:[e.jsxs("p",{className:"text-lg md:text-xl text-charcoal-gray mb-4",children:["Please let us know if you can celebrate with us by ",e.jsx("strong",{className:"text-deep-green",children:t}),"."]}),e.jsx("p",{className:"text-md text-slate-600 mb-10",children:"Click the button to access our RSVP form."}),e.jsx("div",{className:"flex flex-col items-center space-y-8",children:e.jsx(R,{to:o?`/rsvp?name=${o}`:"/rsvp",className:"inline-block bg-deep-green hover:bg-opacity-90 text-white font-semibold py-4 px-10 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105 text-lg",children:"RSVP Online"})}),e.jsx("p",{className:"mt-8 text-sm text-slate-500",children:"We can't wait to share our special day with you!"})]})})},pe=({className:t=""})=>e.jsx("div",{className:`animate-shimmer bg-slate-300 rounded-lg ${t}`,"aria-busy":"true","aria-live":"polite",role:"status"}),fe=({src:t,alt:s})=>{const[a,o]=c.useState(!1),[r,n]=c.useState(!1),i=()=>{o(!0)},m=()=>{console.error(`Failed to load image: ${t}`),n(!0),o(!0)};return e.jsxs("div",{className:"aspect-w-4 aspect-h-3 rounded-lg overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:scale-105 group",children:[!a&&e.jsx(pe,{className:"w-full h-full"}),r&&e.jsxs("div",{className:"w-full h-full bg-slate-200 flex items-center justify-center text-slate-500",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-12 h-12",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})}),e.jsxs("span",{className:"sr-only",children:["Error loading image: ",s]})]}),!r&&e.jsx("img",{src:t,alt:s,className:`object-cover w-full h-full transition-opacity duration-500 ${a?"opacity-100":"opacity-0"}`,onLoad:i,onError:m,loading:"lazy"})]})},be=({images:t})=>e.jsxs(S,{id:"gallery",className:"bg-cream",title:"Our Moments",children:[e.jsx("div",{className:"text-center mb-16 animate-fade-in-up",children:e.jsx("p",{className:"text-lg text-slate-600",children:"A glimpse into our journey together."})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 md:gap-8 animate-fade-in-up",style:{animationDelay:"0.3s"},children:t.map((s,a)=>e.jsx(fe,{src:s.src,alt:s.alt},a))})]}),je=()=>{const t=new Date().getFullYear();return e.jsx("footer",{className:"bg-deep-green text-cream py-10 text-center",children:e.jsxs("div",{className:"container mx-auto px-6",children:[e.jsxs("p",{className:"font-serif text-lg mb-2",children:[g.brideName," & ",g.groomName]}),e.jsx("p",{className:"text-sm mb-4",children:g.footerMessage}),e.jsxs("p",{className:"text-xs",children:["© ",t," All Rights Reserved. Created with joy."]})]})})},ye=({brideName:t,groomName:s})=>e.jsx(S,{className:"bg-soft-blush text-center",title:"With All Our Love,",children:e.jsxs("div",{className:"animate-fade-in-up",children:[e.jsxs("p",{className:"text-4xl font-serif text-deep-green font-semibold",children:[t," & ",s]}),e.jsx("div",{className:"mt-8 text-rose-gold",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"1",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})})]})}),O=({isOpen:t,onClose:s,onConfirm:a,message:o})=>e.jsx("div",{className:`fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50
        transition-opacity duration-300 ease-out backdrop-blur-sm
        ${t?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,children:e.jsxs("div",{className:`bg-white p-6 rounded-lg shadow-xl max-w-sm w-full mx-4
          transform transition-transform duration-300 ease-out
          ${t?"scale-100":"scale-95"}`,children:[e.jsx("p",{className:"text-lg font-semibold mb-4 text-center",children:o}),e.jsxs("div",{className:"flex justify-around space-x-4",children:[e.jsx("button",{onClick:a,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition",children:"Confirm"}),e.jsx("button",{onClick:s,className:"flex-1 px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400 transition",children:"Cancel"})]})]})}),Ne="https://xuholrwaxrnyfivdzjao.supabase.co",we="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh1aG9scndheHJueWZpdmR6amFvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTExMjQ0NTMsImV4cCI6MjA2NjcwMDQ1M30.35p1Rp6W8WOkuGZu8KbYt97PjOAxJR17C8zD_2KN6Cw",f=Q(Ne,we),ve=()=>{const[t,s]=c.useState([]),[a,o]=c.useState(!0),[r,n]=c.useState(null);c.useEffect(()=>{i()},[]);const i=async()=>{o(!0);const{data:l,error:d}=await f.from("guests").select("id, name, status, email, plusoneqty, plusonename");d?(console.error("Error fetching guests:",d),n("Failed to load guests."),p.error("Failed to load guests.")):s(l),o(!1)};return{guests:t,loading:a,error:r,fetchGuests:i,deleteGuest:async l=>{const{error:d}=await f.from("guests").delete().eq("id",l);if(d)throw console.error("Error deleting guest:",d),n("Failed to delete guest."),p.error("Failed to delete guest."),d;s(t.filter(u=>u.id!==l)),p.success("Guest deleted successfully.")}}},Se=()=>e.jsxs("div",{className:"overflow-x-auto animate-pulse",children:[e.jsx("div",{className:"mb-4 h-10 bg-gray-200 rounded-md"}),e.jsxs("table",{className:"min-w-full bg-white border border-gray-200 shadow-md rounded-lg",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-3 px-4 border-b bg-gray-100 text-left text-sm font-medium text-gray-500 uppercase tracking-wider w-1/4",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})}),e.jsx("th",{className:"py-3 px-4 border-b bg-gray-100 text-left text-sm font-medium text-gray-500 uppercase tracking-wider w-1/4",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})}),e.jsx("th",{className:"py-3 px-4 border-b bg-gray-100 text-left text-sm font-medium text-gray-500 uppercase tracking-wider w-1/3",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3"})}),e.jsx("th",{className:"py-3 px-4 border-b bg-gray-100 text-left text-sm font-medium text-gray-500 uppercase tracking-wider w-1/6",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})}),e.jsx("th",{className:"py-3 px-4 border-b bg-gray-100 text-left text-sm font-medium text-gray-500 uppercase tracking-wider w-1/6",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})}),e.jsx("th",{className:"py-3 px-4 border-b bg-gray-100 text-center text-sm font-medium text-gray-500 uppercase tracking-wider w-1/12",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mx-auto"})})]})}),e.jsx("tbody",{children:[...Array(5)].map((t,s)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"py-4 px-4 border-b",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})}),e.jsx("td",{className:"py-4 px-4 border-b",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})}),e.jsx("td",{className:"py-4 px-4 border-b",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded w-full"})}),e.jsx("td",{className:"py-4 px-4 border-b",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})}),e.jsx("td",{className:"py-4 px-4 border-b",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})}),e.jsx("td",{className:"py-4 px-4 border-b text-center",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mx-auto"})})]},s))})]})]}),Ce=()=>{const{guests:t,loading:s,error:a,deleteGuest:o}=ve(),[r,n]=c.useState(null),[i,m]=c.useState("asc"),[l,d]=c.useState(null),[u,x]=c.useState(!1),[b,w]=c.useState(""),C=c.useMemo(()=>t.filter(h=>h.name.toLowerCase().includes(b.toLowerCase())||h.email.toLowerCase().includes(b.toLowerCase())),[t,b]),v=c.useMemo(()=>{let h=[...C];return r&&h.sort((W,q)=>{const L=W[r],k=q[r];return typeof L=="string"&&typeof k=="string"?i==="asc"?L.localeCompare(k):k.localeCompare(L):typeof L=="number"&&typeof k=="number"?i==="asc"?L-k:k-L:0}),h},[C,r,i]),j=h=>{r===h?m(i==="asc"?"desc":"asc"):(n(h),m("asc"))},y=h=>{switch(h){case"attending":return"bg-green-100 text-green-800";case"not_attending":return"bg-red-100 text-red-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return""}},P=h=>{switch(h){case"attending":return e.jsx(N,{icon:se,className:"mr-1"});case"not_attending":return e.jsx(N,{icon:ee,className:"mr-1"});case"pending":return e.jsx(N,{icon:X,className:"mr-1"});default:return null}},E=h=>{d(h),x(!0)},T=async()=>{if(l)try{await o(l.id),d(null),x(!1)}catch{}},B=()=>{d(null),x(!1)};return s?e.jsx(Se,{}):a?e.jsxs("div",{className:"text-center py-4 text-red-500",children:["Error: ",a]}):e.jsxs("div",{className:"overflow-x-auto",children:[e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"text",placeholder:"Search guests by name or email...",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-rose-gold",value:b,onChange:h=>w(h.target.value)})}),e.jsxs("table",{className:"min-w-full bg-white border border-gray-200 shadow-md rounded-lg",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsxs("th",{className:"py-2 px-2 sm:py-3 sm:px-4 border-b cursor-pointer text-left text-sm sm:text-base",onClick:()=>j("name"),children:["Name ",r==="name"&&(i==="asc"?"▲":"▼")]}),e.jsxs("th",{className:"py-2 px-2 sm:py-3 sm:px-4 border-b cursor-pointer text-left text-sm sm:text-base",onClick:()=>j("status"),children:["Status ",r==="status"&&(i==="asc"?"▲":"▼")]}),e.jsxs("th",{className:"py-2 px-2 sm:py-3 sm:px-4 border-b cursor-pointer text-left text-sm sm:text-base",onClick:()=>j("email"),children:["Email ",r==="email"&&(i==="asc"?"▲":"▼")]}),e.jsxs("th",{className:"py-2 px-2 sm:py-3 sm:px-4 border-b cursor-pointer text-left text-sm sm:text-base",onClick:()=>j("plusoneqty"),children:["Plus One Qty ",r==="plusoneqty"&&(i==="asc"?"▲":"▼")]}),e.jsxs("th",{className:"py-2 px-2 sm:py-3 sm:px-4 border-b cursor-pointer text-left text-sm sm:text-base",onClick:()=>j("plusonename"),children:["Plus One Name ",r==="plusonename"&&(i==="asc"?"▲":"▼")]}),e.jsx("th",{className:"py-2 px-2 sm:py-3 sm:px-4 border-b text-center text-sm sm:text-base",children:"Actions"})]})}),e.jsx("tbody",{children:v.map(h=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-2 sm:py-3 sm:px-4 border-b text-left text-sm sm:text-base",children:h.name}),e.jsx("td",{className:"py-2 px-2 sm:py-3 sm:px-4 border-b text-left",children:e.jsxs("span",{className:`inline-flex items-center px-1.5 py-0.5 sm:px-2.5 sm:py-0.5 rounded-full text-xs sm:text-sm font-medium ${y(h.status)}`,children:[P(h.status)," ",h.status]})}),e.jsx("td",{className:"py-2 px-2 sm:py-3 sm:px-4 border-b text-left text-sm sm:text-base",children:h.email}),e.jsx("td",{className:"py-2 px-2 sm:py-3 sm:px-4 border-b text-left text-sm sm:text-base",children:h.plusoneqty}),e.jsx("td",{className:"py-2 px-2 sm:py-3 sm:px-4 border-b text-left text-sm sm:text-base",children:h.plusonename||"N/A"}),e.jsx("td",{className:"py-2 px-2 sm:py-3 sm:px-4 border-b text-center",children:e.jsxs("button",{onClick:()=>E(h),className:"text-red-600 hover:text-red-900 font-medium flex items-center mx-auto space-x-1 text-sm sm:text-base",children:[e.jsx(N,{icon:M}),e.jsx("span",{children:"Delete"})]})})]},h.id))})]}),e.jsx(O,{isOpen:u,onClose:B,onConfirm:T,message:`Are you sure you want to delete guest ${l==null?void 0:l.name}?`})]})},$=()=>{const[t,s]=c.useState([]),[a,o]=c.useState(!0),[r,n]=c.useState(null);c.useEffect(()=>{i()},[]);const i=async()=>{o(!0);const{data:d,error:u}=await f.from("comments").select("id, author, message, timestamp").order("timestamp",{ascending:!1});u?(console.error("Error fetching comments:",u),n("Failed to load comments."),p.error("Failed to load comments.")):s(d),o(!1)};return{comments:t,loading:a,error:r,fetchComments:i,addComment:async d=>{const{data:{user:u}}=await f.auth.getUser(),x=u&&u.email||"Anonymous",{data:b,error:w}=await f.from("comments").insert({author:x,message:d,timestamp:new Date().toISOString()}).select();if(w)throw console.error("Error posting comment:",w),n("Failed to post comment. Please try again."),p.error("Failed to post comment. Please try again."),w;b&&(s([b[0],...t]),p.success("Comment posted successfully."))},deleteComment:async d=>{const{error:u}=await f.from("comments").delete().eq("id",d);if(u)throw console.error("Error deleting comment:",u),n("Failed to delete comment."),p.error("Failed to delete comment."),u;s(t.filter(x=>x.id!==d)),p.success("Comment deleted successfully.")}}},Le=()=>{const{comments:t,loading:s,error:a,deleteComment:o}=$(),[r,n]=c.useState(null),[i,m]=c.useState(!1),l=x=>{n(x),m(!0)},d=async()=>{if(r)try{await o(r.id),n(null),m(!1)}catch{}},u=()=>{n(null),m(!1)};return s?e.jsx("div",{className:"mt-8 p-2 sm:p-0 text-center",children:"Loading comments..."}):a?e.jsxs("div",{className:"mt-8 p-2 sm:p-0 text-center text-red-500",children:["Error: ",a]}):e.jsxs("div",{className:"mt-8 p-2 sm:p-0",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-4",children:"Manage Comments"}),t.length===0?e.jsx("p",{className:"text-sm sm:text-base",children:"No comments yet."}):e.jsx("div",{className:"bg-white shadow overflow-hidden rounded-lg",children:e.jsx("ul",{className:"divide-y divide-gray-200",children:t.map(x=>e.jsxs("li",{className:"px-3 py-3 sm:px-6 sm:py-4 flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[e.jsxs("div",{className:"mb-2 sm:mb-0",children:[e.jsx("p",{className:"text-base sm:text-lg font-medium text-gray-900",children:x.message}),e.jsxs("p",{className:"text-xs sm:text-sm text-gray-500",children:["- ",x.author," (",new Date(x.timestamp).toLocaleString(),")"]})]}),e.jsxs("button",{onClick:()=>l(x),className:"ml-0 sm:ml-4 inline-flex items-center px-2 py-1 sm:px-3 sm:py-2 border border-transparent text-xs sm:text-sm leading-4 font-medium rounded-md shadow-sm text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 space-x-1",children:[e.jsx(N,{icon:M}),e.jsx("span",{children:"Delete"})]})]},x.id))})}),e.jsx(O,{isOpen:i,onClose:u,onConfirm:d,message:`Are you sure you want to delete this comment from ${r==null?void 0:r.author}?`})]})},ke=()=>{const t=F(),[s,a]=c.useState(0);c.useEffect(()=>{(async()=>{const{data:n,error:i}=await f.from("guests").select("plusoneqty").eq("status","attending");if(i)console.error("Error fetching confirmed guests:",i);else{const m=n.reduce((l,d)=>l+(d.plusoneqty||0),0);a(m)}})()},[]);const o=()=>{localStorage.removeItem("adminLoggedIn"),t("/")};return e.jsxs("div",{className:"container mx-auto px-4 py-8 pt-16 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold mb-4 sm:mb-0",children:"Admin Dashboard"}),e.jsx("button",{onClick:o,className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out text-sm sm:text-base",children:"Logout"})]}),e.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl shadow-md mb-8",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-deep-green mb-4",children:"Guest Summary"}),e.jsxs("p",{className:"text-base sm:text-lg text-charcoal-gray",children:["Total Guests Confirmed: ",e.jsx("span",{className:"font-semibold",children:s})]})]}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-4",children:"Guest List"}),e.jsx(Ce,{}),e.jsx(Le,{})]})},Ie=()=>{const[t,s]=c.useState(!1),[a,o]=c.useState(null);return{submitting:t,error:a,submitRSVP:async(n,i,m,l,d)=>{s(!0),o(null);const{error:u}=await f.from("guests").insert({name:n,email:i,status:m,plusoneqty:l});if(u)throw console.error("Error submitting RSVP:",u),o("Failed to submit RSVP."),p.error("Failed to submit RSVP."),s(!1),u;if(d.trim()){const{error:x}=await f.from("comments").insert({author:n,message:d,timestamp:new Date().toISOString()});x&&(console.error("Error posting comment from RSVP:",x),p.error("Failed to post comment, but your RSVP was submitted."))}s(!1),p.success("RSVP submitted successfully!")}}},Ee=()=>{const t=I(),[s,a]=c.useState({name:"",email:"",status:null,guests:1,message:""}),[o,r]=c.useState(!1),{submitting:n,submitRSVP:i}=Ie();c.useEffect(()=>{window.scrollTo(0,0)},[]),c.useEffect(()=>{const d=new URLSearchParams(t.search).get("name");d&&a(u=>({...u,name:d}))},[t.search]);const m=async l=>{l.preventDefault();try{await i(s.name,s.email,s.status||"pending",s.guests,s.message),r(!0)}catch{}};return o?e.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-cream p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-serif text-deep-green mb-4",children:"Thank You!"}),e.jsx("p",{className:"text-lg text-charcoal-gray mb-8",children:"Your RSVP has been received."}),e.jsx(R,{to:"/",className:"text-rose-gold hover:underline",children:"← Back to Home"})]})}):e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-cream p-4 sm:p-8",children:e.jsxs("div",{className:"w-full max-w-2xl mx-auto bg-white p-8 sm:p-12 rounded-xl shadow-2xl",children:[e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("h1",{className:"text-4xl sm:text-5xl font-serif text-deep-green",children:"RSVP"}),e.jsx("p",{className:"text-lg text-slate-600 mt-2",children:"We're so excited to celebrate with you!"})]}),e.jsxs("form",{onSubmit:m,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-md font-semibold text-charcoal-gray mb-2",children:"Full Name"}),e.jsx("input",{type:"text",id:"name",value:s.name,onChange:l=>a({...s,name:l.target.value}),required:!0,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-rose-gold focus:border-transparent transition",placeholder:"Your full name"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-md font-semibold text-charcoal-gray mb-2",children:"Email Address (Optional)"}),e.jsx("input",{type:"email",id:"email",value:s.email,onChange:l=>a({...s,email:l.target.value}),className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-rose-gold focus:border-transparent transition",placeholder:"your.email@example.com"})]}),e.jsxs("fieldset",{className:"space-y-4",children:[e.jsx("legend",{className:"block text-md font-semibold text-charcoal-gray mb-2",children:"Will you be attending?"}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"attending",value:"yes",checked:s.status==="attending",onChange:()=>a({...s,status:"attending"}),required:!0,className:"h-5 w-5 text-deep-green focus:ring-rose-gold"}),e.jsx("span",{className:"text-sm",children:"Yes, I'll be there!"})]}),e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"attending",value:"no",checked:s.status==="not_attending",onChange:()=>a({...s,status:"not_attending"}),required:!0,className:"h-5 w-5 text-deep-green focus:ring-rose-gold"}),e.jsx("span",{className:"text-sm",children:"No, I'll celebrate from afar."})]}),e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"attending",value:"pending",checked:s.status==="pending",onChange:()=>a({...s,status:"pending"}),required:!0,className:"h-5 w-5 text-deep-green focus:ring-rose-gold"}),e.jsx("span",{className:"text-sm",children:"Maybe, I'm not sure yet."})]})]})]}),s.status==="attending"&&e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"guests",className:"block text-md font-semibold text-charcoal-gray mb-2",children:"Number of Guests (including yourself)"}),e.jsx("input",{type:"number",id:"guests",value:s.guests,onChange:l=>a({...s,guests:parseInt(l.target.value,10)}),min:"1",max:"10",required:!0,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-rose-gold focus:border-transparent transition"})]})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"message",className:"block text-md font-semibold text-charcoal-gray mb-2",children:"Leave a message for the couple (optional)"}),e.jsx("textarea",{id:"message",value:s.message,onChange:l=>a({...s,message:l.target.value}),rows:4,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-rose-gold focus:border-transparent transition",placeholder:"Share a memory or well wishes..."})]}),e.jsx("div",{className:"text-center pt-4",children:e.jsx("button",{type:"submit",className:"w-full sm:w-auto bg-deep-green hover:bg-opacity-90 text-white font-bold py-4 px-12 rounded-lg shadow-lg transition duration-300 ease-in-out transform hover:scale-105",disabled:n,children:n?"Submitting...":"Submit RSVP"})})]}),e.jsx("div",{className:"text-center mt-8",children:e.jsx(R,{to:"/",className:"text-sm text-rose-gold hover:underline",children:"← Return to the main site"})})]})})},De=({comments:t})=>e.jsx("div",{className:"space-y-4",children:t.map(s=>e.jsxs("div",{className:`bg-white p-4 rounded-lg shadow ${s.isOptimistic?"opacity-70 animate-pulse":""}`,children:[e.jsx("p",{className:"text-charcoal-gray",children:s.message}),e.jsxs("p",{className:"text-sm text-slate-500 text-right",children:["- ",s.author]})]},s.id))}),Pe=({onSubmit:t,isSubmitting:s=!1})=>{const[a,o]=c.useState(""),r=n=>{n.preventDefault(),a.trim()&&(t(a),o(""))};return e.jsxs("form",{onSubmit:r,className:"mt-8",children:[e.jsx("textarea",{value:a,onChange:n=>o(n.target.value),className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-rose-gold focus:border-transparent transition",placeholder:"Leave a message for the couple...",rows:4}),e.jsx("button",{type:"submit",className:`mt-4 bg-deep-green text-white font-bold py-3 px-8 rounded-lg shadow-lg transition duration-300 ease-in-out ${s?"opacity-50 cursor-not-allowed":"hover:bg-opacity-90 transform hover:scale-105"}`,disabled:s,children:s?"Posting...":"Post Comment"})]})},Re=()=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 shadow-sm animate-pulse bg-white",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("div",{className:"h-4 bg-gray-300 rounded w-1/4"}),e.jsx("div",{className:"ml-auto h-3 bg-gray-200 rounded w-1/6"})]}),e.jsx("div",{className:"h-4 bg-gray-300 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]}),Ae=()=>{const{comments:t,loading:s,error:a,addComment:o}=$(),[r,n]=c.useState(!1),i=async m=>{n(!0);try{await o(m)}catch{}n(!1)};return e.jsxs(S,{id:"comments",className:"bg-cream",title:"Guest Comments",children:[e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-lg md:text-xl text-charcoal-gray mb-8",children:"Leave a message for the happy couple!"})}),e.jsx(Pe,{onSubmit:i,isSubmitting:r}),a&&e.jsx("div",{className:"text-center py-2 text-red-500",children:a}),e.jsx("div",{className:"mt-12",children:s?e.jsx("div",{className:"space-y-4",children:[...Array(3)].map((m,l)=>e.jsx(Re,{},l))}):e.jsx(De,{comments:t})})]})},G=()=>{const[t,s]=c.useState(null),[a,o]=c.useState(!0);return c.useEffect(()=>{(async()=>{const{data:{session:l}}=await f.auth.getSession();s(l),o(!1)})();const{data:m}=f.auth.onAuthStateChange((l,d)=>{s(d)});return()=>{m.subscription.unsubscribe()}},[]),{session:t,loading:a,signIn:async(i,m)=>{const{error:l}=await f.auth.signInWithPassword({email:i,password:m});if(l)throw p.error(l.message),l},signOut:async()=>{const{error:i}=await f.auth.signOut();if(i)throw p.error(i.message),i}}},Me=()=>{const[t,s]=c.useState(""),[a,o]=c.useState(""),[r,n]=c.useState(""),i=F(),{signIn:m}=G(),l=async d=>{d.preventDefault(),n("");try{await m(t,a),i("/admin")}catch(u){n(u.message)}};return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-cream p-4",children:e.jsxs("div",{className:"w-full max-w-md bg-white p-8 rounded-xl shadow-2xl",children:[e.jsx("h1",{className:"text-3xl font-serif text-deep-green text-center mb-8",children:"Admin Login"}),r&&e.jsx("p",{className:"text-red-500 text-center mb-4",children:r}),e.jsxs("form",{onSubmit:l,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"block text-md font-semibold text-charcoal-gray mb-2",children:"Username"}),e.jsx("input",{type:"text",id:"username",value:t,onChange:d=>s(d.target.value),className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-rose-gold focus:border-transparent transition",placeholder:"admin",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-md font-semibold text-charcoal-gray mb-2",children:"Password"}),e.jsx("input",{type:"password",id:"password",value:a,onChange:d=>o(d.target.value),className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-rose-gold focus:border-transparent transition",placeholder:"password",required:!0})]}),e.jsx("button",{type:"submit",className:"w-full bg-deep-green hover:bg-opacity-90 text-white font-bold py-3 px-8 rounded-lg shadow-lg transition duration-300 ease-in-out transform hover:scale-105",children:"Login"})]})]})})},Fe=({children:t})=>{const{session:s,loading:a}=G();return a?e.jsx("div",{children:"Loading..."}):s?e.jsx(e.Fragment,{children:t}):e.jsx(te,{to:"/login",replace:!0})},Oe=({brideName:t,brideDob:s,brideImage:a,groomName:o,groomDob:r,groomImage:n})=>e.jsx(S,{id:"bride-groom",className:"bg-cream",title:"Meet the Couple",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center gap-12 text-center",children:[e.jsxs("div",{className:"flex flex-col items-center animate-fade-in-up",children:[e.jsx("img",{src:a,alt:t,className:"w-48 h-48 rounded-full object-cover shadow-lg mb-4 border-4 border-rose-gold"}),e.jsx("h3",{className:"text-3xl font-serif text-deep-green mb-2",children:t}),e.jsxs("p",{className:"text-lg text-charcoal-gray",children:["Born: ",s]})]}),e.jsx("div",{className:"text-5xl font-serif text-rose-gold hidden md:block",children:"&"}),e.jsxs("div",{className:"flex flex-col items-center animate-fade-in-up",style:{animationDelay:"0.2s"},children:[e.jsx("img",{src:n,alt:o,className:"w-48 h-48 rounded-full object-cover shadow-lg mb-4 border-4 border-rose-gold"}),e.jsx("h3",{className:"text-3xl font-serif text-deep-green mb-2",children:o}),e.jsxs("p",{className:"text-lg text-charcoal-gray",children:["Born: ",r]})]})]})}),$e=()=>{const[t,s]=c.useState(!0),a=I(),o=()=>{s(!1)},r=t&&a.pathname==="/";return e.jsxs("div",{className:"min-h-screen bg-cream text-charcoal-gray antialiased",children:[r&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-cream z-50",children:e.jsx("div",{className:"loader ease-linear rounded-full h-32 w-32"})}),e.jsx(re,{}),e.jsx(ie,{brideName:g.brideName,groomName:g.groomName}),e.jsx("main",{className:r?"hidden":"",children:e.jsxs(ae,{children:[e.jsx(D,{path:"/",element:e.jsxs(e.Fragment,{children:[e.jsx(ce,{brideName:g.brideName,groomName:g.groomName,date:g.date,heroImage:g.heroImage,onImageLoad:o}),e.jsx(Oe,{brideName:g.brideName,brideDob:g.brideDob,brideImage:g.brideImage,groomName:g.groomName,groomDob:g.groomDob,groomImage:g.groomImage}),e.jsx(de,{story:g.story,title:g.storyTitle}),e.jsx(he,{ceremony:g.ceremony,reception:g.reception}),e.jsx(ge,{rsvpDate:g.rsvpByDate}),e.jsx(be,{images:g.galleryImages}),e.jsx(ye,{brideName:g.brideName,groomName:g.groomName}),e.jsx(Ae,{})]})}),e.jsx(D,{path:"/login",element:e.jsx(Me,{})}),e.jsx(D,{path:"/admin",element:e.jsx(Fe,{children:e.jsx(ke,{})})}),e.jsx(D,{path:"/rsvp",element:e.jsx(Ee,{})})]})}),e.jsx(je,{})]})},V=document.getElementById("root");if(!V)throw new Error("Could not find root element to mount to");const Ge=ne.createRoot(V);Ge.render(e.jsx(oe.StrictMode,{children:e.jsx(le,{children:e.jsx($e,{})})}));
